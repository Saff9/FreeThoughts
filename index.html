<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GenZ Smart ‚Äî Blog by Owais</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0b1220; --panel:#101a2f; --ink:#eaf2ff; --sub:#9fb0c9;
  --brand:#7c3aed; --muted:#2a3550; --good:#22c55e; --bad:#ef4444;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}

/* Header */
.header{position:sticky;top:0;z-index:50;background:rgba(16,26,47,.9);backdrop-filter:blur(8px);border-bottom:1px solid var(--muted)}
.header-inner{max-width:1100px;margin:0 auto;padding:12px 16px;display:flex;align-items:center;justify-content:space-between}
.brand{display:flex;align-items:center;gap:10px}
.brand-badge{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,#7c3aed,#22d3ee);display:grid;place-items:center;font-weight:800}
.brand-name{font-weight:800;letter-spacing:.2px}

/* Burger + Drawer */
.burger{appearance:none;border:0;background:transparent;color:var(--ink);cursor:pointer;padding:8px;border-radius:10px}
.burger:focus{outline:2px solid #fff2}
.burger svg{width:22px;height:22px}

.drawer{position:fixed;inset:0;display:none}
.drawer.open{display:block}
.drawer-backdrop{position:absolute;inset:0;background:#0008}
.drawer-panel{position:absolute;right:0;top:0;bottom:0;width:320px;max-width:86vw;background:var(--panel);border-left:1px solid var(--muted);display:flex;flex-direction:column;z-index:60}
.drawer-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--muted)}
.nav{display:flex;flex-direction:column;padding:10px}
.nav a,.nav button{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--ink);background:transparent;border:0;text-align:left;padding:12px 10px;border-radius:10px;font-weight:600;cursor:pointer}
.nav a:hover,.nav button:hover{background:#ffffff14}
.nav .divider{height:1px;background:var(--muted);margin:8px 0}
.toggle{display:flex;align-items:center;gap:10px}

/* Sections */
.section{scroll-margin-top:76px}

/* Hero */
.hero{position:relative;overflow:hidden;border-bottom:1px solid var(--muted);z-index:10}
.hero-inner{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:1.15fr .85fr;gap:24px;align-items:center;padding:28px 16px}
.hero h1{font-size:clamp(24px,4.2vw,42px);margin:0 0 10px}
.hero p{margin:0 0 14px;color:var(--sub)}
.cta{display:flex;gap:10px;flex-wrap:wrap}
.btn{background:var(--brand);color:#fff;border:0;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
.btn.secondary{background:#ffffff14;color:var(--ink)}
.hero-img{position:relative;border-radius:16px;overflow:hidden;min-height:210px;border:1px solid var(--muted)}
.hero-img img{width:100%;height:100%;object-fit:cover;display:block}
.hero-img::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,transparent,rgba(11,18,32,.5))}

/* Layout */
.container{max-width:1100px;margin:0 auto;padding:22px 16px}
.grid{display:grid;grid-template-columns:1fr;gap:14px}
@media(min-width:720px){.grid{grid-template-columns:1fr 1fr}}

.card{background:var(--panel);border:1px solid var(--muted);border-radius:14px;overflow:hidden}
.card-body{padding:14px}
.meta{display:flex;align-items:center;gap:10px;color:var(--sub);font-size:13px;margin-bottom:8px}
.avatar{width:34px;height:34px;border-radius:50%;overflow:hidden;display:grid;place-items:center;background:#1f2a44;border:1px solid var(--muted)}
.title{font-weight:800;margin:0 0 8px}
.content{white-space:pre-wrap;word-wrap:break-word}
.actions{display:flex;gap:8px;margin-top:10px}

/* Skeleton */
.skel{background:var(--panel);border:1px solid var(--muted);border-radius:14px;overflow:hidden}
.skel .bar{height:12px;background:linear-gradient(90deg,#1a2338,#223052,#1a2338);animation:sh 1.1s linear infinite;background-size:200% 100%;border-radius:999px}
.skel .row{display:flex;gap:10px;padding:14px}
.skel .dot{width:34px;height:34px;border-radius:50%;background:#1f2a44}
.skel .grow{flex:1;display:grid;gap:8px}
@keyframes sh{to{background-position:-200% 0}}

.footer{border-top:1px solid var(--muted);color:var(--sub)}
.footer-inner{max-width:1100px;margin:0 auto;padding:22px 16px;display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}

/* Admin */
.admin{background:var(--panel);border:1px solid var(--muted);border-radius:14px;padding:14px;display:none}
.admin label{display:block;font-weight:700;margin-top:8px}
.input, textarea{width:100%;background:#0f172a;border:1px solid var(--muted);color:var(--ink);padding:10px;border-radius:10px}
textarea{min-height:110px;resize:vertical}
.badge{font-size:12px;padding:2px 8px;border-radius:999px;background:#ffffff14;border:1px solid var(--muted);display:inline-block;margin-top:8px}

/* Toasts */
.toast{position:fixed;right:16px;bottom:16px;z-index:80;display:grid;gap:8px}
.toast .t{background:#111a2d;border:1px solid var(--muted);color:var(--ink);padding:10px 12px;border-radius:10px;box-shadow:0 8px 24px #0005}
.t.ok{border-color:#194b2b}
.t.err{border-color:#5c1b1b}

/* Icons */
.icon-yt svg{width:18px;height:18px;fill:#ff0033}
.icon-ig svg{width:18px;height:18px;fill:#e1306c}

/* Ensure layers: drawer always on top of hero */
.hero,.header{z-index:10}
.drawer{z-index:60}
</style>
</head>
<body>

<header class="header">
  <div class="header-inner">
    <div class="brand">
      <div class="brand-badge">GZ</div>
      <div class="brand-name">GenZ Smart</div>
    </div>
    <button id="burger" class="burger" aria-label="Open menu" aria-expanded="false" aria-controls="drawer">
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </button>
  </div>
</header>
<!-- Drawer Menu -->
<div id="drawer" class="drawer" aria-hidden="true">
  <div class="drawer-backdrop" id="backdrop"></div>
  <aside class="drawer-panel" role="dialog" aria-label="Main menu">
    <div class="drawer-head">
      <strong>Menu</strong>
      <button id="closeDrawer" class="burger" aria-label="Close menu">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.3 5.71 12 12l6.3 6.29-1.41 1.42L10.59 13.4 4.3 19.71 2.89 18.3 9.17 12 2.89 5.71 4.3 4.29 10.59 10.6 16.89 4.29z"/></svg>
      </button>
    </div>
    <nav class="nav">
      <a href="#home" data-scroll>üè† Home</a>
      <a href="#blog" data-scroll>üì∞ Blog</a>
      <a href="#about" data-scroll>üë§ About Me</a>
      <div class="divider"></div>
      <a href="https://youtube.com/@calizenowais?si=y5c2lp6JfCjSiJXB" target="_blank" rel="noopener">
        <span class="icon-yt" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M23.5 6.2a4 4 0 0 0-2.8-2.8C18.9 3 12 3 12 3s-6.9 0-8.7.4A4 4 0 0 0 .5 6.2 41.2 41.2 0 0 0 0 12a41.2 41.2 0 0 0 .5 5.8 4 4 0 0 0 2.8 2.8C5.1 21 12 21 12 21s6.9 0 8.7-.4a4 4 0 0 0 2.8-2.8A41.2 41.2 0 0 0 24 12a41.2 41.2 0 0 0-.5-5.8Z"/><path fill="#fff" d="M9.75 15.02V8.98L15.5 12l-5.75 3.02z"/></svg>
        </span>
        YouTube
      </a>
      <a href="https://www.instagram.com/owaisdar_511?igsh=MWV6d21lbjVpNXh6Yg==" target="_blank" rel="noopener">
        <span class="icon-ig" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-5 3.5A5.5 5.5 0 1 1 6.5 13 5.5 5.5 0 0 1 12 7.5zm0 2A3.5 3.5 0 1 0 15.5 13 3.5 3.5 0 0 0 12 9.5zM18 6.8a1.2 1.2 0 1 1-1.2 1.2A1.2 1.2 0 0 1 18 6.8z"/></svg>
        </span>
        Instagram
      </a>
      <div class="divider"></div>
      <button id="loginBtn">üîê Admin Login</button>
      <div class="divider"></div>
      <label class="toggle"><input id="darkToggle" type="checkbox"> Dark mode</label>
    </nav>
  </aside>
</div>

<!-- Home -->
<section id="home" class="hero section">
  <div class="hero-inner">
    <div>
      <h1>Notes & updates ‚Äî by <span style="color:var(--brand)">GenZ Owais</span></h1>
      <p>Global blog powered by Firebase. Admin-only posting. Links (YouTube, Instagram, etc.) auto-clickable. Posts newer than one week appear here and on the Blog.</p>
      <div class="cta">
        <a href="#blog" data-scroll class="btn">Read the Blog</a>
        <a href="#about" data-scroll class="btn secondary">About Owais</a>
      </div>
      <p style="color:var(--sub);margin-top:8px">No account needed for visitors. Admin can create, edit, delete after login.</p>
    </div>
    <div class="hero-img" aria-hidden="true">
      <img src="https://images.unsplash.com/photo-1529101091764-c3526daf38fe?q=80&w=1400&auto=format&fit=crop" alt="Abstract workspace background" />
    </div>
  </div>
</section>

<!-- Blog + Admin -->
<section id="blog" class="container section">
  <div id="adminPanel" class="admin">
    <h3 style="margin:0 0 8px">Create / Edit Post</h3>
    <form id="postForm">
      <input type="hidden" id="editId" />
      <label>Title</label>
      <input id="title" class="input" type="text" placeholder="Post title" />
      <label>Content</label>
      <textarea id="content" placeholder="Write something‚Ä¶ URLs become clickable"></textarea>
      <div style="display:flex;gap:8px;margin-top:10px">
        <button type="submit" class="btn">Save</button>
        <button type="button" id="cancelEdit" class="btn secondary" style="display:none">Cancel edit</button>
      </div>
      <div class="badge">Author: GenZ Owais</div>
    </form>
  </div>

  <h2 style="margin:14px 0">Latest posts</h2>
  <div id="feed" class="grid"></div>
</section>

<!-- About -->
<section id="about" class="container section">
  <h2>About Me</h2>
  <p>Hey there! I‚Äôm <strong>Owais Ahmad</strong>, a high school student born and raised in the breathtaking valleys of Kashmir, India. I‚Äôm passionate about learning new things, exploring creative ideas, and making each day count.</p>
  <p>I‚Äôve got a curious mind, a drive to grow, and a dream to create something meaningful in this world. Whether it‚Äôs diving into books, exploring tech, or just enjoying the peace of the mountains‚ÄîI'm always looking for inspiration.</p>
  <p>I believe in staying positive, working hard, and never stopping the hustle. Still young, but dreaming big ‚Äî and I‚Äôm just getting started. üöÄ Let‚Äôs make it happen!</p>
</section>

<footer class="footer">
  <div class="footer-inner">
    <div>¬© <span id="year"></span> <strong>GenZ Smart Blog</strong> ‚Äî All rights reserved by Owais Ahmad.</div>
    <div>Made with ‚ù§ in Kashmir.</div>
  </div>
</footer>

<div class="toast" id="toast"></div>

<!-- App (Firebase modular SDK) -->
<script type="module">
/* ===== Firebase Modular SDK (v10) ===== */
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-analytics.js";
import {
  getFirestore, collection, addDoc, updateDoc, deleteDoc, doc,
  onSnapshot, query, orderBy, serverTimestamp, getDoc
} from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

/* ===== Your Firebase config ===== */
const firebaseConfig = {
  apiKey: "AIzaSyAgjMRRlmsOlX5EsNbPLmFAYrDxKmIEmUc",
  authDomain: "genz-owaisblog.firebaseapp.com",
  databaseURL: "https://genz-owaisblog-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "genz-owaisblog",
  storageBucket: "genz-owaisblog.firebasestorage.app",
  messagingSenderId: "104507541594",
  appId: "1:104507541594:web:b4212217a4cedc83927063",
  measurementId: "G-EW066JCY32"
};

const app = initializeApp(firebaseConfig);
// Analytics requires HTTPS / allowed domains ‚Äî ignore errors locally
try { getAnalytics(app); } catch(e) { /* no-op */ }
const db = getFirestore(app);

/* ===== App Config ===== */
// HTML login (as requested)
const ADMIN_EMAIL = "saffanakbar942@gmail.com";
const ADMIN_PASS  = "saffan942";
// Admin key used by Firestore Rules to authorize writes.
// !!! Replace this with your own long random secret, and paste the same into Rules below.
const ADMIN_KEY = "s3cur3_Adm1nK3y_9283xyz";
/* ===== DOM Shortcuts ===== */
const qs  = s => document.querySelector(s);
const qsa = s => Array.from(document.querySelectorAll(s));

const drawer = qs('#drawer'), burger = qs('#burger'), backdrop = qs('#backdrop'), closeDrawerBtn = qs('#closeDrawer');
const darkToggle = qs('#darkToggle');

const adminPanel = qs('#adminPanel');
const postForm = qs('#postForm');
const editId = qs('#editId');
const titleEl = qs('#title');
const contentEl = qs('#content');
const cancelEditBtn = qs('#cancelEdit');
const feedEl = qs('#feed');
const toastEl = qs('#toast');

document.getElementById('year').textContent = new Date().getFullYear();

/* ===== Drawer (no overlap + scroll lock) ===== */
function openDrawer(){ drawer.classList.add('open'); burger.setAttribute('aria-expanded','true'); document.body.style.overflow='hidden'; }
function closeDrawer(){ drawer.classList.remove('open'); burger.setAttribute('aria-expanded','false'); document.body.style.overflow=''; }
burger.addEventListener('click', openDrawer);
backdrop.addEventListener('click', closeDrawer);
closeDrawerBtn.addEventListener('click', closeDrawer);
qsa('[data-scroll]').forEach(a=>{
  a.addEventListener('click',e=>{
    e.preventDefault();
    const id = a.getAttribute('href');
    const target = document.querySelector(id);
    if(!target) return;
    const headerH = document.querySelector('.header').offsetHeight;
    const top = target.getBoundingClientRect().top + window.scrollY - (headerH + 8);
    window.scrollTo({top, behavior:'smooth'});
    closeDrawer();
  });
});
/* ===== Dark mode ===== */
const prefersDark = matchMedia('(prefers-color-scheme: dark)').matches;
if(localStorage.theme===undefined){ localStorage.theme = prefersDark?'dark':'light'; }
applyTheme(localStorage.theme);
darkToggle.checked = localStorage.theme==='dark';
darkToggle.addEventListener('change',()=>{
  localStorage.theme = darkToggle.checked?'dark':'light';
  applyTheme(localStorage.theme);
});
function applyTheme(mode){
  if(mode==='dark'){
    document.documentElement.style.setProperty('--bg','#0b1220');
    document.documentElement.style.setProperty('--panel','#101a2f');
    document.documentElement.style.setProperty('--ink','#eaf2ff');
    document.documentElement.style.setProperty('--sub','#9fb0c9');
  }else{
    document.documentElement.style.setProperty('--bg','#f8fafc');
    document.documentElement.style.setProperty('--panel','#ffffff');
    document.documentElement.style.setProperty('--ink','#0b1220');
    document.documentElement.style.setProperty('--sub','#475569');
  }
}

/* ===== Toasts ===== */
function toast(msg, type='ok'){
  const t = document.createElement('div');
  t.className = `t ${type==='ok'?'ok':'err'}`;
  t.textContent = msg;
  toastEl.appendChild(t);
  setTimeout(()=> t.remove(), 2800);
}

/* ===== Helpers ===== */
function avatarSVG(){
  // WhatsApp-like simple default DP (no per-post image; only this small avatar)
  return `data:image/svg+xml;utf8,${encodeURIComponent(`
    <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'>
      <defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'>
        <stop offset='0%' stop-color='%2323a6d5'/><stop offset='100%' stop-color='%237c3aed'/></linearGradient></defs>
      <rect width='64' height='64' rx='12' fill='url(%23g)'/>
      <circle cx='32' cy='24' r='12' fill='white' fill-opacity='0.92'/>
      <rect x='14' y='40' width='36' height='14' rx='7' fill='white' fill-opacity='0.92'/>
    </svg>
  `)}`;
}
function escapeHtml(s){return (s||'').replace(/[&<>\"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[c]));}
function linkifySafe(text){
  // escape first, then linkify
  const escaped = escapeHtml(text);
  const urlRegex = /(https?:\/\/[^\s]+)/g;
  return escaped.replace(urlRegex,(url)=>`<a href="${url}" target="_blank" rel="noopener">${url}</a>`);
}
function within7Days(ts){
  if(!ts) return true; // show optimistic while waiting for serverTimestamp
  const t = ts.toMillis ? ts.toMillis() : (+ts||Date.now());
  return (Date.now()-t) <= 7*24*60*60*1000;
}

/* ===== Admin Login ===== */
let isAdmin = false;
qs('#loginBtn').addEventListener('click', ()=>{
  const email = prompt('Admin Email:');
  if(email !== ADMIN_EMAIL){ alert('Invalid credentials'); return; }
  const pass = prompt('Password:');
  if(pass !== ADMIN_PASS){ alert('Invalid credentials'); return; }
  isAdmin = true;
  adminPanel.style.display = 'block';
  toast('Admin mode enabled','ok');
});

/* ===== Firestore: Live Feed ===== */
const postsRef = collection(db,'posts');

function skelCard(){
  const el = document.createElement('div');
  el.className='skel';
  el.innerHTML = `
    <div class="row"><div class="dot"></div><div class="grow"><div class="bar" style="width:40%"></div><div class="bar" style="width:80%"></div></div></div>
    <div class="row"><div class="grow"><div class="bar" style="width:90%"></div><div class="bar" style="width:70%"></div></div></div>
  `;
  return el;
}
function adminButtons(id){
  return `
    <div class="actions">
      <button class="btn" data-edit="${id}">Edit</button>
      <button class="btn" style="background:var(--bad)" data-del="${id}">Delete</button>
    </div>
  `;
}
function postCard(id,data){
  const when = data.timestamp?.toDate ? data.timestamp.toDate() : new Date();
  const el = document.createElement('article');
  el.className='card';
  el.innerHTML = `
    <div class="card-body">
      <div class="meta">
        <div class="avatar"><img alt="dp" src="${avatarSVG()}" width="34" height="34"/></div>
        <div>
          <div><strong>GenZ Owais</strong> ‚Ä¢ <span title="${when.toLocaleString()}">${when.toDateString()}</span></div>
          <div class="badge">By GenZ Owais</div>
        </div>
      </div>
      ${data.title ? `<h3 class="title">${escapeHtml(data.title)}</h3>` : ''}
      <div class="content">${linkifySafe(data.content||'')}</div>
      ${isAdmin ? adminButtons(id) : ''}
    </div>
  `;
  return el;
}
function wireAdminButtons(){
  qsa('[data-edit]').forEach(btn=>{
    btn.onclick = async ()=>{
      const id = btn.getAttribute('data-edit');
      const d = await getDoc(doc(db,'posts',id));
      if(!d.exists()){ toast('Post not found','err'); return; }
      const data = d.data();
      editId.value = id;
      titleEl.value = data.title || '';
      contentEl.value = data.content || '';
      cancelEditBtn.style.display='inline-flex';
      window.scrollTo({top: qs('#blog').offsetTop - 70, behavior:'smooth'});
    };
  });
  qsa('[data-del]').forEach(btn=>{
    btn.onclick = async ()=>{
      const id = btn.getAttribute('data-del');
      if(!confirm('Delete this post?')) return;
      try{
        await deleteDoc(doc(db,'posts',id));
        toast('Post deleted','ok');
      }catch(e){ toast(e.message,'err'); }
    };
  });
}

let unsub=null;
function startFeed(){
  feedEl.innerHTML='';
  for(let i=0;i<4;i++) feedEl.appendChild(skelCard());
  if(unsub) unsub();
  const q = query(postsRef, orderBy('timestamp','desc'));
  unsub = onSnapshot(q, (snap)=>{
    feedEl.innerHTML='';
    const docs = snap.docs.filter(d=>within7Days(d.data().timestamp));
    if(docs.length===0){
      const empty = document.createElement('div');
      empty.className='card';
      empty.innerHTML = `<div class="card-body">No posts in the last week. üëã</div>`;
      feedEl.appendChild(empty);
    }else{
      docs.forEach(d=>feedEl.appendChild(postCard(d.id,d.data())));
      wireAdminButtons();
    }
  }, (err)=>{
    feedEl.innerHTML = `<div class="card"><div class="card-body" style="color:#fca5a5">Error loading posts: ${escapeHtml(err.message)}</div></div>`;
  });
}

/* ===== Create / Update ===== */
postForm.addEventListener('submit', async (e)=>{
  e.preventDefault();
  const title = titleEl.value.trim();
  const content = contentEl.value.trim();
  if(!content){ toast('Content required','err'); return; }
  try{
    if(editId.value){
      await updateDoc(doc(db,'posts',editId.value), { title, content, adminKey: ADMIN_KEY });
      toast('Post updated','ok');
    }else{
      await addDoc(postsRef, { title, content, author:'GenZ Owais', timestamp: serverTimestamp(), adminKey: ADMIN_KEY });
      toast('Post published','ok');
    }
    postForm.reset();
    editId.value='';
    cancelEditBtn.style.display='none';
  }catch(err){ toast(err.message,'err'); }
});
cancelEditBtn.addEventListener('click',()=>{
  postForm.reset(); editId.value=''; cancelEditBtn.style.display='none';
});

/* ===== Init ===== */
startFeed();
</script>
</body>
</html>
